/******************************************************************************
    Copyright (c) __20xx __Client_Name. All rights reserved.
    Developed for __Client_Name by Carbon Design Group.
******************************************************************************/

/// @file timer.h


//============================= CONDITIONALS ==================================


#ifndef timer_H
#define timer_H

#ifdef __cplusplus
extern "C" {
#endif


//=============================== INCLUDES ====================================


#include <stdint.h>
#include <stdbool.h>
	

//====================== CONSTANTS, TYPES, AND MACROS =========================


typedef void (*Runnable)(void* context);


//=============================== VARIABLES ===================================


//=============================== FUNCTIONS ===================================


//-----------------------------------------------------------------------------
/// Initialize the timer subsystem.
///
//-----------------------------------------------------------------------------
void
timer_init(
        void
);


//-----------------------------------------------------------------------------
/// Initialize the timer subsystem.
///
//-----------------------------------------------------------------------------
void
delay(
        uint32_t ms
);


//-----------------------------------------------------------------------------
/// Add a runnable to run in the future.
///
//-----------------------------------------------------------------------------
void
post_delayed(
        Runnable    runnable,
        void*		context,
        uint32_t	ms_delay
);


//-----------------------------------------------------------------------------
/// Add a runnable to run periodically in the future.
///
//-----------------------------------------------------------------------------
void
post_periodic(
        Runnable    runnable,
        void*       context,
        uint32_t    period_ms,
        uint32_t    delay_ms
);


//-----------------------------------------------------------------------------
/// Remove a runnable.
///
//-----------------------------------------------------------------------------
void
remove_runnable(
        Runnable runnable
);


//-----------------------------------------------------------------------------
/// Remove all queued runnables
///
//-----------------------------------------------------------------------------
void
clear_runnables(
        void
);


#ifdef __cplusplus
}
#endif

#endif // timer_H

